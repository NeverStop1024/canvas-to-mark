# canvas-to-mark

canvaså›¾ç‰‡æ ‡æ³¨å·¥å…·  

[demo](https://codesandbox.io/s/throbbing-dust-tyn5wk?file=/index.html) | [æ•ˆæœ](https://tyn5wk.csb.app/)

![example_lhizmZ](https://cdn.jsdelivr.net/gh/NeverStop1024/images-store@main/blog/example_lhizmZ.png)

## ç®€ä»‹

- æ”¯æŒçŸ©å½¢æ ‡æ³¨ã€å¤šè¾¹å½¢æ ‡æ³¨ã€ç‚¹æ ‡æ³¨ã€‚

- æ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ã€‚

- æ”¯æŒæ§åˆ¶ç‚¹ç¼–è¾‘ã€‚

- æ”¯æŒå…¨å±€æ ·å¼è®¾ç½®ï¼Œå•ä¸ªå½¢çŠ¶æ ·å¼è®¾ç½®ã€‚

- æ”¯æŒæ·»åŠ ã€ç¼–è¾‘æ ‡ç­¾ã€‚

- æ¯ä¸ªå½¢çŠ¶æœ‰å”¯ä¸€ uuidï¼Œæ²¡æœ‰åˆ™è‡ªåŠ¨ç”Ÿæˆã€‚

## 1ã€ä½¿ç”¨

- è®¾ç½® instance.createType æŒ‡å®šéœ€è¦åˆ›å»ºå½¢çŠ¶ç±»å‹ã€‚

- åˆ›å»ºçŸ©å½¢æ—¶ï¼ŒæŒ‰ä½é¼ æ ‡å·¦é”®æ‹–åŠ¨å®Œæˆåˆ›å»ºã€‚

- åˆ›å»ºå¤šè¾¹å½¢æ—¶ï¼Œé¼ æ ‡å·¦é”®å•å‡»æ·»åŠ ç‚¹ï¼ŒåŒå‡»é—­åˆå®Œæˆåˆ›å»ºï¼Œ`Escape`é€€å‡ºåˆ›å»ºï¼Œ`Backspace`é€€ä¸€æ­¥åˆ é™¤é€‰æ‹©ç‚¹ã€‚

- æŒ‰ä½é¼ æ ‡å³é”®æ‹–åŠ¨ç”»å¸ƒã€‚

- é¼ æ ‡æ»šè½®ç¼©æ”¾ç”»å¸ƒã€‚

- é€‰ä¸­å½¢çŠ¶ï¼Œ`Backspace`åˆ é™¤

- é€šè¿‡ instance.dataset æŸ¥çœ‹æ ‡æ³¨ç»“æœ

æ”¯æŒ UMD æ¨¡å—è§„èŒƒ

```
npm i canvas-to-mark
```

## 1ã€å®ä¾‹å±æ€§

å¯¹ä»»æ„å±æ€§çš„ä¿®æ”¹éƒ½éœ€è¦è°ƒç”¨`instance.update()`æ›´æ–°è§†å›¾

| å±æ€§åç§°          |   ç±»å‹    |         é»˜è®¤å€¼         | å•ä¸ªå½¢çŠ¶å±æ€§ä¿®æ”¹ |     è¯´æ˜     |
| ----------------- |:-------:|:-------------------:| :--------------: |:----------:|
| lock              | boolean |        false        |                  |   æ˜¯å¦é”å®šç”»å¸ƒ   |
| MIN_WIDTH         | number  |         10          |                  |   æœ€å°çŸ©å½¢å®½åº¦   |
| MIN_HEIGHT        | number  |         10          |                  |   æœ€å°çŸ©å½¢é«˜åº¦   |
| strokeStyle       | string  |   rgb(0, 0, 255)    |       æ”¯æŒ       |   å½¢çŠ¶è¾¹çº¿é¢œè‰²   |
| fillStyle         | string  | rgba(0, 0, 255,0.1) |       æ”¯æŒ       |   å½¢çŠ¶å¡«å……é¢œè‰²   |
| activeStrokeStyle | string  |        #f00         |                  | é€‰ä¸­çš„å½¢çŠ¶è¾¹çº¿é¢œè‰²  |
| ctrlFillStyle     | string  |        #fff         |                  |  æ§åˆ¶ç‚¹å¡«å……é¢œè‰²   |
| ctrlRadius        | number  |          5          |                  |   æ§åˆ¶ç‚¹åŠå¾„    |
| pointRadius        | number  |          5          |                  |    åœ†åŠå¾„     |
| labelFillStyle    | string  |        #fff         |       æ”¯æŒ       | label å¡«å……é¢œè‰² |
| labelFontSize        | number  |          12          |                  | labelæ–‡å­—å¤§å°  |
| labelFontColor    | string  |        #000         |       æ”¯æŒ       | label æ–‡å­—é¢œè‰² |
| labelMaxLen       | number  |          5          |                  |    label å­—ç¬¦æœ€å¤§æ˜¾ç¤ºä¸ªæ•°ï¼Œè¶…å‡ºå­—ç¬¦å°†ç”¨...è¡¨ç¤º    |
| rollScal          | boolean | true  |                  |             æ˜¯å¦å…è®¸æ»šè½®ç¼©æ”¾             |
| createType        | boolean |   0   |                  |    0 ä¸åˆ›å»ºï¼Œ1 åˆ›å»ºçŸ©å½¢ï¼Œ2 åˆ›å»ºå¤šè¾¹å½¢ï¼Œ3 ç‚¹æ ‡æ³¨    |
| zoomCenter          | String  | canvasCenter  |                  | ç¼©æ”¾ä¸­å¿ƒï¼ˆcanvasCenter ç”»å¸ƒä¸­å¿ƒï¼Œmouse é¼ æ ‡ï¼‰ |

## 2ã€å®ä¾‹æ–¹æ³•

| æ–¹æ³•åç§°      | å‚æ•°ç±»å‹ |                 è¯´æ˜                  |
| ------------- | :------: | :-----------------------------------: |
| setImage      |  string  |             æ·»åŠ /åˆ‡æ¢å›¾ç‰‡             |
| setData       |  Array   |             åŠ è½½åˆå§‹æ•°æ®              |
| setScale      | boolean  |     true æ”¾å¤§ç”»å¸ƒï¼Œfalse ç¼©å°ç”»å¸ƒ     |
| fitZoom       |    æ—     |      é€‚é…å›¾ç‰‡åˆ°ç”»å¸ƒ ï¼ˆcontainï¼‰       |
| update        |    æ—     | æ›´æ–°ç”»å¸ƒï¼Œ ä¿®æ”¹å®ä¾‹å±æ€§åè¦æ‰§è¡Œæ­¤æ–¹æ³• |
| deleteByIndex |  number  |           æ ¹æ®ç´¢å¼•åˆ é™¤å½¢çŠ¶            |

## 3ã€äº‹ä»¶

| äº‹ä»¶åç§° | å›è°ƒå‚æ•° |        è¯´æ˜        |
| -------- | :------: | :----------------: |
| select   |   info   |   å½“å‰é€‰ä¸­çš„æ•°æ®   |
| add      |   info   |   å½“å‰æ·»åŠ çš„æ•°æ®   |
| delete   |   info   |   å½“å‰åˆ é™¤çš„æ•°æ®   |
| updated  |   info   | å‘ç”Ÿå˜åŒ–çš„å½¢çŠ¶æ•°æ® |
| load     |    æ—     |    å›¾ç‰‡åŠ è½½å®Œæˆ    |
| error    |  error   |      é”™è¯¯ä¿¡æ¯      |


## æ³¨é‡Š
æœ¬é¡¹åœ¨[canvas-select](https://github.com/heylight/canvas-select)åŸºç¡€ä¸Šåšäº†äº›æ”¹åŠ¨ï¼Œæ„Ÿè°¢åŸä½œè€…ğŸ™
